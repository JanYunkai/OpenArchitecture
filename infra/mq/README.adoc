== 消息不丢失不重复

消费端重复消费：很容易解决，建立去重表
消费端丢失数据：也容易解决，关闭自动offset，处理完之后提交
生产端重复发送：这个不重要，消费端消费之前从去重表中判断就可以
生产端丢失数据：这个是最麻烦的情况
解决策略：
1. 异步方式缓冲区满了，就阻塞在那，等着缓冲区可用，不能情况缓冲区
2. 发送消息之后回调函数，发送成功就发送下一条，发送失败就记在日志中，等着定时脚本来扫描（发送失败可能并不真的发送失败，只是没有收到反馈，定时脚本可能会重发）